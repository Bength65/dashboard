<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Crypto Dashboard</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">ðŸ’° MyWallet</div>
    <nav>
      <a href="#portfolio">Portfolio</a>
      <a href="#prices">Prices</a>
      <a href="#charts">Charts</a>
    </nav>
  </header>

  <main>
    <!-- My Portfolio -->
    <section class="portfolio" id="portfolio">
      <h2>My Portfolio</h2>
      <div class="portfolio-content">
        <ul>
          <li>Bitcoin â€“ 32%</li>
          <li>Tether â€“ 20%</li>
          <li>Ripple â€“ 18%</li>
          <li>Doge â€“ 15%</li>
          <li>Ethereum â€“ 15%</li>
        </ul>
        <div class="pie-chart"></div>
      </div>
    </section>

    <!-- Live Prices -->
    <section class="prices" id="prices">
      <h2>Live Prices</h2>
      <div class="price-cards">
        <div class="card btc">
          <h3>Bitcoin (BTC)</h3>
          <p class="current">Aktuellt pris: â€“</p>
          <p class="high">24h High: â€“</p>
          <p class="low">24h Low: â€“</p>
        </div>
        <div class="card eth">
          <h3>Ethereum (ETH)</h3>
          <p class="current">Aktuellt pris: â€“</p>
          <p class="high">24h High: â€“</p>
          <p class="low">24h Low: â€“</p>
        </div>
        <div class="card sol">
          <h3>Solana (SOL)</h3>
          <p class="current">Aktuellt pris: â€“</p>
          <p class="high">24h High: â€“</p>
          <p class="low">24h Low: â€“</p>
        </div>
        <div class="card ltc">
          <h3>Litecoin (LTC)</h3>
          <p class="current">Aktuellt pris: â€“</p>
          <p class="high">24h High: â€“</p>
          <p class="low">24h Low: â€“</p>
        </div>
      </div>
    </section>

    <!-- Charts -->
    <section class="charts" id="charts">
      <div class="panel">
        <h3>BTC/USDT Live Chart</h3>
        <div class="chart"></div>
      </div>
      <div class="panel">
        <h3>Portfolio value over time</h3>
        <div class="line-chart"></div>
      </div>
    </section>
  </main>

  <script>
    // Live prices fÃ¶r fyra coins
    const coins = [
      { symbol: "BTCUSDT", selector: ".card.btc" },
      { symbol: "ETHUSDT", selector: ".card.eth" },
      { symbol: "SOLUSDT", selector: ".card.sol" },
      { symbol: "LTCUSDT", selector: ".card.ltc" }
    ];

    async function updatePrices() {
      for (const coin of coins) {
        const res = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${coin.symbol}`);
        const data = await res.json();
        const card = document.querySelector(coin.selector);
        card.querySelector(".current").textContent = `Aktuellt pris: $${parseFloat(data.lastPrice).toFixed(2)}`;
        card.querySelector(".high").textContent    = `24h High: $${parseFloat(data.highPrice).toFixed(2)}`;
        card.querySelector(".low").textContent     = `24h Low: $${parseFloat(data.lowPrice).toFixed(2)}`;
      }
    }
    updatePrices();
    setInterval(updatePrices, 10000);

    // Portfolio pie
    Plotly.newPlot(document.querySelector('.pie-chart'), [{
      values: [32, 20, 18, 15, 15],
      labels: ['Bitcoin','Tether','Ripple','Doge','Ethereum'],
      type: 'pie',
      textinfo: 'label+percent'
    }], { paper_bgcolor: 'transparent', font: { color: '#fff' } });

    // Portfolio line
    Plotly.newPlot(document.querySelector('.line-chart'), [{
       x: ['2025-11-01','2025-11-02','2025-11-03','2025-11-04'],
       y: [35000, 36000, 37000, 38252],
       type: 'scatter',
       mode: 'lines+markers',
       line: { color: '#ffd700' }
    }], 
    { paper_bgcolor: 'transparent', plot_bgcolor: '#1e1e2f', font: { color: '#fff' } },
    { responsive: true }
    );

    // BTC candlestick chart
    async function fetchBTC(interval = "1m") {
      const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=${interval}&limit=200`);
      const raw = await res.json();
      return [{
        x: raw.map(c => new Date(c[0])),
        open: raw.map(c => +c[1]),
        high: raw.map(c => +c[2]),
        low: raw.map(c => +c[3]),
        close: raw.map(c => +c[4]),
        type: 'candlestick',
        name: 'BTC/USDT'
      }];
    }

    async function renderBTC() {
      const data = await fetchBTC('1m');
      Plotly.newPlot(document.querySelector('.chart'), data, {
        autosize: true,
        margin: { l: 60, r: 60, t: 40, b: 40 },
        paper_bgcolor: 'transparent',
        plot_bgcolor: '#1e1e2f',
        font: { color: '#fff' },
        xaxis: { showgrid: true, gridcolor: '#555' },
        yaxis: {
          showgrid: true,
          gridcolor: '#555',
          autorange: true,
          side: 'right',
          dtick: 100
        }
      });
    }
    renderBTC();
    setInterval(async () => {
      const data = await fetchBTC('1m');
      Plotly.update(document.querySelector('.chart'), data);
    }, 10000);
  </script>
      <footer>
        <p class="footertext">Â© 2025 Bengt HafstrÃ¶m</p>
    </footer>
</body>
</html>